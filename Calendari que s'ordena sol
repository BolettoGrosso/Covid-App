<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
  <meta charset="UTF-8">
</head>

<body>
<div>
    <table id = "Taula" style="width:50%">
      <h1>Merceria Pepito</h1>
      <tr>
        <th>Nom</th>
        <th>Hora</th>
        <th>Petició</th>
      </tr>
      <tr>
        <td>Fulanito</td>
        <td>8:00-8:15</td>
        <td>Dos barras de pan</td>
      </tr>
      <tr>
        <td>menganito</td>
        <td>8:15-8:30</td>
        <td>un entrepà</td>
      </tr>
    </table>
  </div>

  <style>
table td {
  border: 1px solid black;
}
</style>


<br>


<button type="button" onclick="myFunction(); sortTable()">Enviar petició</button>
<input type="text" id="nom" name="nom" placeholder='Nom'><br><br>
<input type="text" id="peticio" name="peticio" placeholder='peticio'><br><br>
<select id="hora" name="hora" placeholder='Hora'>
  <option value="7-7:15">7-7:15</option>
  <option value="7:15-7:30">7:15-7:30</option>
  <option value="7:30-7:45">7:30-7:45</option>
  <option value="7:45-8">7:45-8</option>
  <option value="8-8:15">8-8:15</option>
  <option value="8:15-8:30">8:15-8:30</option>

</select>


<button onclick="">Sort</button>

<script>
        var horesAgafades = [];

        function myFunction() {
          if (horesAgafades.includes(document.getElementById("hora").value)){
            alert('Hora ocupada');
          } else{
              var nom = document.getElementById("nom").value;
              var hora = document.getElementById("hora").value;
              var peticio = document.getElementById("peticio").value;
              horesAgafades.push(hora);

              var table = document.getElementById("Taula");
              var row = table.insertRow(1);
              var cell1 = row.insertCell(0);
              var cell2 = row.insertCell(1);
              var cell3 = row.insertCell(2);
              cell1.innerHTML = nom;
              cell2.innerHTML = hora;
              cell3.innerHTML = peticio;
            }
}
</script>

<script>
function sortTable() {
  var table, rows, switching, i, x, y, shouldSwitch;
  table = document.getElementById("Taula");
  switching = true;
  /* Make a loop that will continue until
  no switching has been done: */
  while (switching) {
    // Start by saying: no switching is done:
    switching = false;
    rows = table.rows;
    /* Loop through all table rows (except the
    first, which contains table headers): */
    for (i = 1; i < (rows.length - 1); i++) {
      // Start by saying there should be no switching:
      shouldSwitch = false;
      /* Get the two elements you want to compare,
      one from current row and one from the next: */
      x = rows[i].getElementsByTagName("TD")[1];
      y = rows[i + 1].getElementsByTagName("TD")[1];
      // Check if the two rows should switch place:
      if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
        // If so, mark as a switch and break the loop:
        shouldSwitch = true;
        break;
      }
    }
    if (shouldSwitch) {
      /* If a switch has been marked, make the switch
      and mark that a switch has been done: */
      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
    }
  }
}
</script>

</body>
   </div>
</body>
</html>
